(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[434],{283:(e,r,t)=>{"use strict";t.d(r,{A:()=>m,AuthProvider:()=>c});var a=t(5155),i=t(2115),s=t(3004),n=t(6104),o=t(7481);let l={uid:"mock-uid",email:"mock@example.com",displayName:"Mock User",emailVerified:!0,isAnonymous:!1,phoneNumber:null,photoURL:null,providerData:[],tenantId:null,refreshToken:"mock-refresh-token",metadata:{creationTime:new Date().toISOString(),lastSignInTime:new Date().toISOString()},providerId:"firebase",delete:async()=>{},getIdToken:async()=>"mock-id-token",getIdTokenResult:async()=>({token:"mock-id-token",claims:{},expirationTime:new Date(Date.now()+36e5).toISOString(),issuedAtTime:new Date().toISOString(),authTime:new Date().toISOString(),signInProvider:null,signInSecondFactor:null}),reload:async()=>{},toJSON:()=>({})},d=(0,i.createContext)(void 0),c=e=>{let{children:r}=e,[t,c]=(0,i.useState)(null),[m,u]=(0,i.useState)(!1),[h,p]=(0,i.useState)(!0),[f,x]=(0,i.useState)(null),{toast:g}=(0,o.dj)(),j=(0,s.xI)(n.y);(0,i.useEffect)(()=>{let e=(0,s.hg)(j,e=>{e?(c(e),u(!0)):(c(null),u(!1)),p(!1)});return()=>e()},[j]);let v=async(e,r)=>{x(null),p(!0);try{await (0,s.x9)(j,e,r),g({title:"Logged In Successfully!",description:"Welcome back to MediaScope.",variant:"default"})}catch(e){x(e.message),g({title:"Login Failed",description:e.message,variant:"destructive"}),console.error("Login error:",e)}finally{p(!1)}},b=async(e,r,t)=>{x(null),p(!0);try{let a=await (0,s.eJ)(j,e,r);a.user&&(await (0,s.r7)(a.user,{displayName:t}),c(a.user),u(!0),g({title:"Account Created!",description:"Welcome to MediaScope. Your account has been successfully created.",variant:"default"}))}catch(e){x(e.message),g({title:"Signup Failed",description:e.message,variant:"destructive"}),console.error("Signup error:",e)}finally{p(!1)}},y=async()=>{x(null),p(!0);try{await (0,s.CI)(j),g({title:"Logged Out",description:"You have been successfully logged out.",variant:"default"})}catch(e){x(e.message),g({title:"Logout Failed",description:e.message,variant:"destructive"}),console.error("Logout error:",e)}finally{p(!1)}};return(0,a.jsx)(d.Provider,{value:{user:t||l,isAuthenticated:m,isLoading:h,error:f,login:v,signup:b,logout:y},children:r})},m=()=>{let e=(0,i.useContext)(d);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},2949:(e,r,t)=>{Promise.resolve().then(t.bind(t,6702))},6104:(e,r,t)=>{"use strict";t.d(r,{y:()=>i});var a=t(3915);let i=(0,a.Dk)().length?(0,a.Sx)():(0,a.Wp)({apiKey:"AIzaSyDluqLuKutYp0PrJOjVDFpSuef4rGtkBXg",authDomain:"mediascope-vimbd.firebaseapp.com",projectId:"mediascope-vimbd",storageBucket:"mediascope-vimbd.firebasestorage.app",messagingSenderId:"28020752153",appId:"1:28020752153:web:fe2dd484777670e8cacf88"})},6702:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>O});var a=t(5155),i=t(2115),s=t(2177),n=t(221),o=t(5594),l=t(285),d=t(2523),c=t(8539),m=t(9409),u=t(9708),h=t(9434),p=t(5057);let f=s.Op,x=i.createContext({}),g=e=>{let{...r}=e;return(0,a.jsx)(x.Provider,{value:{name:r.name},children:(0,a.jsx)(s.xI,{...r})})},j=()=>{let e=i.useContext(x),r=i.useContext(v),{getFieldState:t,formState:a}=(0,s.xW)(),n=t(e.name,a);if(!e)throw Error("useFormField should be used within <FormField>");let{id:o}=r;return{id:o,name:e.name,formItemId:"".concat(o,"-form-item"),formDescriptionId:"".concat(o,"-form-item-description"),formMessageId:"".concat(o,"-form-item-message"),...n}},v=i.createContext({}),b=i.forwardRef((e,r)=>{let{className:t,...s}=e,n=i.useId();return(0,a.jsx)(v.Provider,{value:{id:n},children:(0,a.jsx)("div",{ref:r,className:(0,h.cn)("space-y-2",t),...s})})});b.displayName="FormItem";let y=i.forwardRef((e,r)=>{let{className:t,...i}=e,{error:s,formItemId:n}=j();return(0,a.jsx)(p.J,{ref:r,className:(0,h.cn)(s&&"text-destructive",t),htmlFor:n,...i})});y.displayName="FormLabel";let S=i.forwardRef((e,r)=>{let{...t}=e,{error:i,formItemId:s,formDescriptionId:n,formMessageId:o}=j();return(0,a.jsx)(u.DX,{ref:r,id:s,"aria-describedby":i?"".concat(n," ").concat(o):"".concat(n),"aria-invalid":!!i,...t})});S.displayName="FormControl",i.forwardRef((e,r)=>{let{className:t,...i}=e,{formDescriptionId:s}=j();return(0,a.jsx)("p",{ref:r,id:s,className:(0,h.cn)("text-sm text-muted-foreground",t),...i})}).displayName="FormDescription";let M=i.forwardRef((e,r)=>{var t;let{className:i,children:s,...n}=e,{error:o,formMessageId:l}=j(),d=o?String(null!==(t=null==o?void 0:o.message)&&void 0!==t?t:""):s;return d?(0,a.jsx)("p",{ref:r,id:l,className:(0,h.cn)("text-sm font-medium text-destructive",i),...n,children:d}):null});M.displayName="FormMessage";var k=t(3717),w=t(283),N=t(7481),I=t(172);let P=o.Ik({mediaMaterial:o.k5(k.O2,{required_error:"Media material is required."}),otherMediaMaterial:o.Yj().optional(),platform:o.k5(k.MD,{required_error:"Media Platform is required."}),otherPlatform:o.Yj().optional(),issueLink:o.Yj().url({message:"Please enter a valid URL."}).optional().or(o.eu("")),screenshotLink:o.Yj().optional().or(o.eu("")),description:o.Yj().min(10,{message:"Description must be at least 10 characters."}).max(1e3,{message:"Description must not exceed 1000 characters."})}).refine(e=>"Other"!==e.mediaMaterial||!!e.otherMediaMaterial&&e.otherMediaMaterial.trim().length>0,{message:"Please specify the other media material.",path:["otherMediaMaterial"]}).refine(e=>"Other"!==e.platform||!!e.otherPlatform&&e.otherPlatform.trim().length>0,{message:"Please specify the other media platform.",path:["otherPlatform"]}).refine(e=>{let r=e.issueLink&&""!==e.issueLink.trim(),t=e.screenshotLink&&""!==e.screenshotLink.trim();return r||t},{message:"Please provide either a Link to Media Content or Upload a Screenshot.",path:["issueLink"]});function L(e){let{onSubmitSuccess:r}=e,{user:t}=(0,w.A)(),{toast:i}=(0,N.dj)(),o=(0,s.mN)({resolver:(0,n.u)(P),defaultValues:{mediaMaterial:void 0,otherMediaMaterial:"",platform:void 0,otherPlatform:"",issueLink:"",screenshotLink:"",description:""}}),{formState:{isSubmitting:u},watch:h}=o,p=h("mediaMaterial"),x=h("platform"),j=async e=>{if(!t){i({title:"Authentication Error",description:"You must be logged in to report an incident.",variant:"destructive"});return}await new Promise(e=>setTimeout(e,1e3)),r({...e,mediaMaterial:e.mediaMaterial,otherMediaMaterial:"Other"===e.mediaMaterial?e.otherMediaMaterial:"",platform:e.platform,otherPlatform:"Other"===e.platform?e.otherPlatform:""}),o.reset()};return(0,a.jsx)(f,{...o,children:(0,a.jsxs)("form",{onSubmit:o.handleSubmit(j),className:"space-y-6",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,a.jsx)(g,{control:o.control,name:"mediaMaterial",render:e=>{let{field:r}=e;return(0,a.jsxs)(b,{children:[(0,a.jsx)(y,{children:"Media Material"}),(0,a.jsxs)(m.l6,{onValueChange:r.onChange,defaultValue:r.value,children:[(0,a.jsx)(S,{children:(0,a.jsx)(m.bq,{children:(0,a.jsx)(m.yv,{placeholder:"Select media material"})})}),(0,a.jsx)(m.gC,{children:k.O2.map(e=>(0,a.jsx)(m.eb,{value:e,children:k.ER[e]||e},e))})]}),(0,a.jsx)(M,{})]})}}),"Other"===p&&(0,a.jsx)(g,{control:o.control,name:"otherMediaMaterial",render:e=>{let{field:r}=e;return(0,a.jsxs)(b,{children:[(0,a.jsx)(y,{children:"Specify Other Media Material"}),(0,a.jsx)(S,{children:(0,a.jsx)(d.p,{placeholder:"e.g., Podcast Series",...r})}),(0,a.jsx)(M,{})]})}}),(0,a.jsx)(g,{control:o.control,name:"platform",render:e=>{let{field:r}=e;return(0,a.jsxs)(b,{children:[(0,a.jsx)(y,{children:"Media Platform"}),(0,a.jsxs)(m.l6,{onValueChange:r.onChange,defaultValue:r.value,children:[(0,a.jsx)(S,{children:(0,a.jsx)(m.bq,{children:(0,a.jsx)(m.yv,{placeholder:"Select media platform"})})}),(0,a.jsx)(m.gC,{children:k.MD.map(e=>(0,a.jsx)(m.eb,{value:e,children:k.Wm[e]||e},e))})]}),(0,a.jsx)(M,{})]})}}),"Other"===x&&(0,a.jsx)(g,{control:o.control,name:"otherPlatform",render:e=>{let{field:r}=e;return(0,a.jsxs)(b,{children:[(0,a.jsx)(y,{children:"Specify Other Media Platform"}),(0,a.jsx)(S,{children:(0,a.jsx)(d.p,{placeholder:"e.g., Specific App Name",...r})}),(0,a.jsx)(M,{})]})}})]}),(0,a.jsx)(g,{control:o.control,name:"issueLink",render:e=>{let{field:r}=e;return(0,a.jsxs)(b,{children:[(0,a.jsx)(y,{children:"Link to Media Content"}),(0,a.jsx)(S,{children:(0,a.jsx)(d.p,{placeholder:"e.g., https://example.com/article-or-post-name",...r})}),(0,a.jsx)(M,{})]})}}),(0,a.jsx)(g,{control:o.control,name:"screenshotLink",render:e=>{let{field:r}=e;return(0,a.jsxs)(b,{children:[(0,a.jsx)(y,{children:"Upload Screenshot"}),(0,a.jsx)(S,{children:(0,a.jsx)("input",{type:"file",accept:"image/*",className:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",onChange:e=>{var t;let a=null===(t=e.target.files)||void 0===t?void 0:t[0];if(a){let e=new FileReader;e.onloadend=()=>{r.onChange(e.result)},e.readAsDataURL(a)}else r.onChange("")}})}),(0,a.jsx)(M,{})]})}}),(0,a.jsx)(g,{control:o.control,name:"description",render:e=>{let{field:r}=e;return(0,a.jsxs)(b,{children:[(0,a.jsx)(y,{children:"Incident Description"}),(0,a.jsx)(S,{children:(0,a.jsx)(c.T,{placeholder:"Provide a detailed description of the incident...",className:"min-h-[120px]",...r})}),(0,a.jsx)(M,{})]})}}),(0,a.jsxs)(l.$,{type:"submit",className:"w-full md:w-auto",disabled:u,children:[u&&(0,a.jsx)(I.A,{className:"me-2 h-4 w-4 animate-spin"}),"Submit Report"]})]})})}var C=t(3473);function O(){let{toast:e}=(0,N.dj)(),{user:r}=(0,w.A)();return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold tracking-tight",children:"Submit New Incident Report"}),(0,a.jsx)("div",{className:(0,h.cn)("max-w-2xl p-6 rounded-lg border bg-card text-card-foreground shadow-sm"),children:(0,a.jsx)(L,{onSubmitSuccess:t=>{if(!r||!r.displayName){e({title:"Error",description:"User information not available. Cannot submit report.",variant:"destructive"});return}try{let a={...t,mediaMaterial:t.mediaMaterial,platform:t.platform,reportedBy:r.displayName},i=(0,C.ie)(a);e({title:"Incident Report Submitted",description:"Incident ".concat(i.serialNumber," successfully submitted."),variant:"default"})}catch(t){let r="There was an issue submitting your report. Please try again.";t instanceof Error?r=t.message:"string"==typeof t&&""!==t.trim()&&(r=t),e({title:"Error Submitting Report",description:r,variant:"destructive"}),console.error("Error submitting incident object:",t)}}})})]})}},8539:(e,r,t)=>{"use strict";t.d(r,{T:()=>n});var a=t(5155),i=t(2115),s=t(9434);let n=i.forwardRef((e,r)=>{let{className:t,...i}=e;return(0,a.jsx)("textarea",{className:(0,s.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:r,...i})});n.displayName="Textarea"}},e=>{var r=r=>e(e.s=r);e.O(0,[73,786,769,353,644,6,712,342,483,441,684,358],()=>r(2949)),_N_E=e.O()}]);