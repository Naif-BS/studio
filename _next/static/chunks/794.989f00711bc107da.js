"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[794],{6424:(e,s,a)=>{a.d(s,{F:()=>i});var t=a(5155),l=a(2115),r=a(7655),n=a(9434);let i=l.forwardRef((e,s)=>{let{className:a,children:l,...i}=e;return(0,t.jsxs)(r.bL,{ref:s,className:(0,n.cn)("relative overflow-hidden",a),...i,children:[(0,t.jsx)(r.LM,{className:"h-full w-full rounded-[inherit]",children:l}),(0,t.jsx)(o,{}),(0,t.jsx)(r.OK,{})]})});i.displayName=r.bL.displayName;let o=l.forwardRef((e,s)=>{let{className:a,orientation:l="vertical",...i}=e;return(0,t.jsx)(r.VM,{ref:s,orientation:l,className:(0,n.cn)("flex touch-none select-none transition-colors","vertical"===l&&"h-full w-2.5 border-l border-l-transparent p-[1px]","horizontal"===l&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",a),...i,children:(0,t.jsx)(r.lr,{className:"relative flex-1 rounded-full bg-border"})})});o.displayName=r.VM.displayName},6794:(e,s,a)=>{a.r(s),a.d(s,{default:()=>v});var t=a(5155),l=a(2115),r=a(6695),n=a(2415),i=a(285),o=a(8539),c=a(6424),d=a(7648),m=a(6318),x=a(9311),h=a(511),f=a(1721),u=a(5222),p=a(3672),j=a(8127),N=a(4148),g=a(691),b=a(283),A=a(9100),w=a(9434);function v(e){let{ticket:s,onUpdateStatus:a,onAddAction:v,isUpdating:y,isModalVariant:k}=e,{user:L}=(0,b.A)(),[S,M]=(0,l.useState)("");l.useEffect(()=>{M("")},[s]);let P=g.c,C="Closed"!==s.status,R=s.actionsLog.length>0;return(0,t.jsxs)(r.Zp,{className:(0,w.cn)("w-full",k?"":"shadow-sm animate-in fade-in zoom-in-80 slide-in-from-bottom-4 duration-500"),children:[!k&&(0,t.jsxs)(r.aR,{children:[(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-2",children:[(0,t.jsx)(r.ZB,{className:"text-2xl font-bold",children:s.serialNumber}),(0,t.jsx)(n.S,{status:s.status,className:"px-3 py-1.5 text-sm"})]}),(0,t.jsxs)(r.BT,{className:"text-sm text-muted-foreground flex items-center pt-1",children:[(0,t.jsx)(d.A,{className:"h-4 w-4 me-1.5"}),"Received: ".concat((0,N.GP)(new Date(s.receivedAt),"PPp",{locale:P})," by ").concat(s.reportedBy)]})]}),(0,t.jsxs)(r.Wu,{className:(0,w.cn)("pt-0"),children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"font-semibold text-md mb-1",children:"Incident Details"}),(0,t.jsx)("p",{className:"text-sm text-foreground/90",children:s.description}),(0,t.jsxs)("div",{className:"mt-2 space-y-1 text-sm text-muted-foreground",children:[(0,t.jsxs)("p",{children:[(0,t.jsx)("strong",{children:"Media Material:"}),"Other"===s.mediaMaterial&&s.otherMediaMaterial?"Other: ".concat(s.otherMediaMaterial):({"Press Release":"Press Release","Legal Document":"Legal Document",Infographic:"Infographic",Image:"Image","Video Clip":"Video Clip","Audio Clip":"Audio Clip",GIF:"GIF",Other:"Other"})[s.mediaMaterial]||s.mediaMaterial]}),(0,t.jsxs)("p",{children:[(0,t.jsx)("strong",{children:"Media Platform:"}),"Other"===s.platform&&s.otherPlatform?"Other: ".concat(s.otherPlatform):({"Umm Al-Qura Newspaper":"Umm Al-Qura Newspaper","Local Media Channel/Platform":"Local Media Channel/Platform","International Media Channel/Platform":"International Media Channel/Platform","SRSA Website":"SRSA Website","Unified Platform":"Unified Platform","SRSA Account on Platform X":"SRSA Account on Platform X","SRSA Account on Instagram":"SRSA Account on Instagram","SRSA Account on TikTok":"SRSA Account on TikTok","SRSA Account on LinkedIn":"SRSA Account on LinkedIn",Other:"Other"})[s.platform]||s.platform]}),s.issueLink&&(0,t.jsxs)("p",{className:"flex items-center",children:[(0,t.jsx)(m.A,{className:"h-4 w-4 me-1.5"}),(0,t.jsx)("strong",{children:"Link to Media Content:"}),"\xa0",(0,t.jsx)("a",{href:s.issueLink,target:"_blank",rel:"noopener noreferrer",className:"text-primary hover:underline truncate",children:s.issueLink})]}),s.screenshotLink&&(0,t.jsxs)("div",{className:"mt-2",children:[(0,t.jsxs)("p",{className:"flex items-center font-semibold text-sm mb-1",children:[(0,t.jsx)(x.A,{className:"h-4 w-4 me-1.5 text-primary"}),"Screenshot:"]}),s.screenshotLink.startsWith("data:image/")?(0,t.jsx)("img",{src:s.screenshotLink,alt:"Screenshot",className:"rounded-md border max-w-full h-auto max-h-60 object-contain","data-ai-hint":"user uploaded image"}):(0,t.jsx)("a",{href:s.screenshotLink,target:"_blank",rel:"noopener noreferrer",className:"text-primary hover:underline truncate",children:"View Screenshot Link"})]})]})]}),(0,t.jsx)(A.w,{className:"my-4"}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("h3",{className:"font-semibold text-md mb-2 flex items-center",children:[(0,t.jsx)(h.A,{className:"h-5 w-5 me-2 text-primary"}),"Action Log"]}),s.actionsLog.length>0?(0,t.jsx)(c.F,{className:"h-40 border rounded-md p-3 bg-muted/30",children:(0,t.jsx)("ul",{className:"space-y-3",children:s.actionsLog.slice().reverse().map((e,s)=>(0,t.jsxs)("li",{className:"text-sm",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center text-xs text-muted-foreground mb-0.5",children:[(0,t.jsxs)("span",{className:"flex items-center",children:[(0,t.jsx)(f.A,{className:"h-3 w-3 me-1"}),e.user]}),(0,t.jsxs)("span",{className:"flex items-center",children:[(0,t.jsx)(d.A,{className:"h-3 w-3 me-1"}),(0,N.GP)(new Date(e.timestamp),"MMM d, yyyy h:mm a",{locale:P})]})]}),(0,t.jsx)("p",{className:"text-foreground/90",children:e.description})]},s))})}):(0,t.jsx)("p",{className:"text-sm text-muted-foreground italic",children:"No actions logged yet."})]}),!!a&&!!v&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(A.w,{className:"my-4"}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("h3",{className:"font-semibold text-md flex items-center",children:[(0,t.jsx)(u.A,{className:"h-5 w-5 me-2 text-primary"}),"Update Incident"]}),(0,t.jsxs)("div",{className:"space-y-1.5",children:[(0,t.jsx)("label",{htmlFor:"action-log",className:"text-sm font-medium text-muted-foreground",children:"Log Action"}),(0,t.jsx)(o.T,{id:"action-log",placeholder:"Log actions taken for this incident...",value:S,onChange:e=>M(e.target.value),className:"min-h-[80px]",disabled:y||!C})]}),(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row gap-2",children:[(0,t.jsxs)(i.$,{onClick:()=>{S.trim()&&(null==L?void 0:L.displayName)&&v&&(v(s.id,S.trim()),M(""))},disabled:!S.trim()||y||!C,className:"flex-1 sm:flex-auto",children:[(0,t.jsx)(p.A,{className:"h-4 w-4 me-2"})," Log Action"]}),(0,t.jsxs)(i.$,{variant:"destructive",onClick:()=>{if(a&&"Closed"!==s.status){let e="Incident closed by ".concat((null==L?void 0:L.displayName)||"User",".");a(s.id,"Closed",e)}},disabled:y||!C||!R,className:"flex-1 sm:flex-auto",children:[(0,t.jsx)(j.A,{className:"h-4 w-4 me-2"})," Close Incident"]})]})]})]})]}),!k&&"Closed"===s.status&&s.closedAt&&(0,t.jsx)(r.wL,{className:"text-sm text-muted-foreground",children:"Resolved on: ".concat((0,N.GP)(new Date(s.closedAt),"PPp",{locale:P}))})]})}},8539:(e,s,a)=>{a.d(s,{T:()=>n});var t=a(5155),l=a(2115),r=a(9434);let n=l.forwardRef((e,s)=>{let{className:a,...l}=e;return(0,t.jsx)("textarea",{className:(0,r.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",a),ref:s,...l})});n.displayName="Textarea"}}]);