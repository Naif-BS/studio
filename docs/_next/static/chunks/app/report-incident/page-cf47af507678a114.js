(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[434],{283:(e,r,t)=>{"use strict";t.d(r,{A:()=>d,AuthProvider:()=>n});var i=t(5155),a=t(2115),s=t(5695),o=t(7481);let l=(0,a.createContext)(void 0),n=e=>{let{children:r}=e,[t,n]=(0,a.useState)(null),[d,c]=(0,a.useState)(!0),m=(0,s.useRouter)(),{toast:u}=(0,o.dj)();(0,a.useEffect)(()=>{c(!0);try{let e=localStorage.getItem("mediaScopeUser");if(e){let r=JSON.parse(e);r?(r.displayName&&""!==r.displayName.trim()||(r.displayName=(r.email?r.email.split("@")[0].trim():"")||"User"),r.displayName||(r.displayName="User"),r.photoURL="https://placehold.co/100x100.png?text=".concat((r.displayName[0]||"U").toUpperCase()),n(r)):n(null)}}catch(e){console.error("Failed to load user from localStorage:",e),localStorage.removeItem("mediaScopeUser"),n(null)}finally{c(!1)}},[]);let h=async(e,r)=>{c(!0);try{await new Promise(e=>setTimeout(e,1e3));let r=e||"user@example.com",t=r.split("@")[0].trim();t||(t="User");let i=t,a={uid:"mock-user-123",email:r,displayName:i,photoURL:"https://placehold.co/100x100.png?text=".concat((i[0]||"U").toUpperCase()),emailVerified:!0,isAnonymous:!1,metadata:{},providerData:[],providerId:"password",refreshToken:"mock-refresh-token",tenantId:null,delete:async()=>{},getIdToken:async()=>"mock-id-token",getIdTokenResult:async()=>({token:"mock-id-token",claims:{},expirationTime:"",issuedAtTime:"",signInProvider:null,signInSecondFactor:null}),reload:async()=>{},toJSON:()=>({})};n(a),localStorage.setItem("mediaScopeUser",JSON.stringify(a)),u({title:"Sign In Successful (Mock)",description:"Redirecting to your dashboard...",variant:"default"}),m.push("/dashboard")}catch(e){console.error("Login process failed:",e),u({title:"Sign In Failed (Mock)",description:"Could not sign in at this time. Please try again later.",variant:"destructive"})}finally{c(!1)}},p=async()=>{c(!0);try{await new Promise(e=>setTimeout(e,500)),n(null),localStorage.removeItem("mediaScopeUser"),u({title:"Signed Out",description:"You have been successfully signed out.",variant:"default"}),m.push("/login")}catch(e){console.error("Logout process failed:",e),u({title:"Sign Out Failed",description:"Could not sign out at this time.",variant:"destructive"})}finally{c(!1)}};return(0,i.jsx)(l.Provider,{value:{user:t,isAuthenticated:!!t,isLoading:d,login:h,logout:p},children:r})},d=()=>{let e=(0,a.useContext)(l);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},2949:(e,r,t)=>{Promise.resolve().then(t.bind(t,6702))},6702:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>R});var i=t(5155),a=t(2115),s=t(2177),o=t(221),l=t(5594),n=t(285),d=t(2523),c=t(8539),m=t(9409),u=t(9708),h=t(9434),p=t(5057);let f=s.Op,x=a.createContext({}),g=e=>{let{...r}=e;return(0,i.jsx)(x.Provider,{value:{name:r.name},children:(0,i.jsx)(s.xI,{...r})})},j=()=>{let e=a.useContext(x),r=a.useContext(v),{getFieldState:t,formState:i}=(0,s.xW)(),o=t(e.name,i);if(!e)throw Error("useFormField should be used within <FormField>");let{id:l}=r;return{id:l,name:e.name,formItemId:"".concat(l,"-form-item"),formDescriptionId:"".concat(l,"-form-item-description"),formMessageId:"".concat(l,"-form-item-message"),...o}},v=a.createContext({}),b=a.forwardRef((e,r)=>{let{className:t,...s}=e,o=a.useId();return(0,i.jsx)(v.Provider,{value:{id:o},children:(0,i.jsx)("div",{ref:r,className:(0,h.cn)("space-y-2",t),...s})})});b.displayName="FormItem";let y=a.forwardRef((e,r)=>{let{className:t,...a}=e,{error:s,formItemId:o}=j();return(0,i.jsx)(p.J,{ref:r,className:(0,h.cn)(s&&"text-destructive",t),htmlFor:o,...a})});y.displayName="FormLabel";let M=a.forwardRef((e,r)=>{let{...t}=e,{error:a,formItemId:s,formDescriptionId:o,formMessageId:l}=j();return(0,i.jsx)(u.DX,{ref:r,id:s,"aria-describedby":a?"".concat(o," ").concat(l):"".concat(o),"aria-invalid":!!a,...t})});M.displayName="FormControl",a.forwardRef((e,r)=>{let{className:t,...a}=e,{formDescriptionId:s}=j();return(0,i.jsx)("p",{ref:r,id:s,className:(0,h.cn)("text-sm text-muted-foreground",t),...a})}).displayName="FormDescription";let N=a.forwardRef((e,r)=>{var t;let{className:a,children:s,...o}=e,{error:l,formMessageId:n}=j(),d=l?String(null!==(t=null==l?void 0:l.message)&&void 0!==t?t:""):s;return d?(0,i.jsx)("p",{ref:r,id:n,className:(0,h.cn)("text-sm font-medium text-destructive",a),...o,children:d}):null});N.displayName="FormMessage";var k=t(3717),S=t(283),w=t(7481),P=t(172);let C=l.Ik({mediaMaterial:l.k5(k.O2,{required_error:"Media material is required."}),otherMediaMaterial:l.Yj().optional(),platform:l.k5(k.MD,{required_error:"Media Platform is required."}),otherPlatform:l.Yj().optional(),issueLink:l.Yj().url({message:"Please enter a valid URL."}).optional().or(l.eu("")),screenshotLink:l.Yj().optional().or(l.eu("")),description:l.Yj().min(10,{message:"Description must be at least 10 characters."}).max(1e3,{message:"Description must not exceed 1000 characters."})}).refine(e=>"Other"!==e.mediaMaterial||!!e.otherMediaMaterial&&e.otherMediaMaterial.trim().length>0,{message:"Please specify the other media material.",path:["otherMediaMaterial"]}).refine(e=>"Other"!==e.platform||!!e.otherPlatform&&e.otherPlatform.trim().length>0,{message:"Please specify the other media platform.",path:["otherPlatform"]}).refine(e=>{let r=e.issueLink&&""!==e.issueLink.trim(),t=e.screenshotLink&&""!==e.screenshotLink.trim();return r||t},{message:"Please provide either a Link to Media Content or Upload a Screenshot.",path:["issueLink"]});function I(e){let{onSubmitSuccess:r}=e,{user:t}=(0,S.A)(),{toast:a}=(0,w.dj)(),l=(0,s.mN)({resolver:(0,o.u)(C),defaultValues:{mediaMaterial:void 0,otherMediaMaterial:"",platform:void 0,otherPlatform:"",issueLink:"",screenshotLink:"",description:""}}),{formState:{isSubmitting:u},watch:h}=l,p=h("mediaMaterial"),x=h("platform"),j=async e=>{if(!t){a({title:"Authentication Error",description:"You must be logged in to report an incident.",variant:"destructive"});return}await new Promise(e=>setTimeout(e,1e3)),r({...e,mediaMaterial:e.mediaMaterial,otherMediaMaterial:"Other"===e.mediaMaterial?e.otherMediaMaterial:"",platform:e.platform,otherPlatform:"Other"===e.platform?e.otherPlatform:""}),l.reset()};return(0,i.jsx)(f,{...l,children:(0,i.jsxs)("form",{onSubmit:l.handleSubmit(j),className:"space-y-6",children:[(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,i.jsx)(g,{control:l.control,name:"mediaMaterial",render:e=>{let{field:r}=e;return(0,i.jsxs)(b,{children:[(0,i.jsx)(y,{children:"Media Material"}),(0,i.jsxs)(m.l6,{onValueChange:r.onChange,defaultValue:r.value,children:[(0,i.jsx)(M,{children:(0,i.jsx)(m.bq,{children:(0,i.jsx)(m.yv,{placeholder:"Select media material"})})}),(0,i.jsx)(m.gC,{children:k.O2.map(e=>(0,i.jsx)(m.eb,{value:e,children:k.ER[e]||e},e))})]}),(0,i.jsx)(N,{})]})}}),"Other"===p&&(0,i.jsx)(g,{control:l.control,name:"otherMediaMaterial",render:e=>{let{field:r}=e;return(0,i.jsxs)(b,{children:[(0,i.jsx)(y,{children:"Specify Other Media Material"}),(0,i.jsx)(M,{children:(0,i.jsx)(d.p,{placeholder:"e.g., Podcast Series",...r})}),(0,i.jsx)(N,{})]})}}),(0,i.jsx)(g,{control:l.control,name:"platform",render:e=>{let{field:r}=e;return(0,i.jsxs)(b,{children:[(0,i.jsx)(y,{children:"Media Platform"}),(0,i.jsxs)(m.l6,{onValueChange:r.onChange,defaultValue:r.value,children:[(0,i.jsx)(M,{children:(0,i.jsx)(m.bq,{children:(0,i.jsx)(m.yv,{placeholder:"Select media platform"})})}),(0,i.jsx)(m.gC,{children:k.MD.map(e=>(0,i.jsx)(m.eb,{value:e,children:k.Wm[e]||e},e))})]}),(0,i.jsx)(N,{})]})}}),"Other"===x&&(0,i.jsx)(g,{control:l.control,name:"otherPlatform",render:e=>{let{field:r}=e;return(0,i.jsxs)(b,{children:[(0,i.jsx)(y,{children:"Specify Other Media Platform"}),(0,i.jsx)(M,{children:(0,i.jsx)(d.p,{placeholder:"e.g., Specific App Name",...r})}),(0,i.jsx)(N,{})]})}})]}),(0,i.jsx)(g,{control:l.control,name:"issueLink",render:e=>{let{field:r}=e;return(0,i.jsxs)(b,{children:[(0,i.jsx)(y,{children:"Link to Media Content"}),(0,i.jsx)(M,{children:(0,i.jsx)(d.p,{placeholder:"e.g., https://example.com/article-or-post-name",...r})}),(0,i.jsx)(N,{})]})}}),(0,i.jsx)(g,{control:l.control,name:"screenshotLink",render:e=>{let{field:r}=e;return(0,i.jsxs)(b,{children:[(0,i.jsx)(y,{children:"Upload Screenshot"}),(0,i.jsx)(M,{children:(0,i.jsx)("input",{type:"file",accept:"image/*",className:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",onChange:e=>{var t;let i=null===(t=e.target.files)||void 0===t?void 0:t[0];if(i){let e=new FileReader;e.onloadend=()=>{r.onChange(e.result)},e.readAsDataURL(i)}else r.onChange("")}})}),(0,i.jsx)(N,{})]})}}),(0,i.jsx)(g,{control:l.control,name:"description",render:e=>{let{field:r}=e;return(0,i.jsxs)(b,{children:[(0,i.jsx)(y,{children:"Incident Description"}),(0,i.jsx)(M,{children:(0,i.jsx)(c.T,{placeholder:"Provide a detailed description of the incident...",className:"min-h-[120px]",...r})}),(0,i.jsx)(N,{})]})}}),(0,i.jsxs)(n.$,{type:"submit",className:"w-full md:w-auto",disabled:u,children:[u&&(0,i.jsx)(P.A,{className:"me-2 h-4 w-4 animate-spin"}),"Submit Report"]})]})})}var L=t(3473);function R(){let{toast:e}=(0,w.dj)(),{user:r}=(0,S.A)();return(0,i.jsxs)("div",{className:"space-y-6",children:[(0,i.jsx)("h1",{className:"text-3xl font-bold tracking-tight",children:"Submit New Incident Report"}),(0,i.jsx)("div",{className:(0,h.cn)("max-w-2xl p-6 rounded-lg border bg-card text-card-foreground shadow-sm"),children:(0,i.jsx)(I,{onSubmitSuccess:t=>{if(!r||!r.displayName){e({title:"Error",description:"User information not available. Cannot submit report.",variant:"destructive"});return}try{let i={...t,reportedBy:r.displayName},a=(0,L.ie)(i);e({title:"Incident Report Submitted",description:"Incident ".concat(a.serialNumber," successfully submitted."),variant:"default"})}catch(t){let r="There was an issue submitting your report. Please try again.";t instanceof Error?r=t.message:"string"==typeof t&&""!==t.trim()&&(r=t),e({title:"Error Submitting Report",description:r,variant:"destructive"}),console.error("Error submitting incident object:",t)}}})})]})}},8539:(e,r,t)=>{"use strict";t.d(r,{T:()=>o});var i=t(5155),a=t(2115),s=t(9434);let o=a.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,i.jsx)("textarea",{className:(0,s.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:r,...a})});o.displayName="Textarea"}},e=>{var r=r=>e(e.s=r);e.O(0,[668,644,59,737,564,483,441,684,358],()=>r(2949)),_N_E=e.O()}]);